import { BaseValidator } from './BaseValidator';
import schemaV2 from '../schemas/openapi/v2.0.0.json';
import schemaV3 from '../schemas/openapi/v3.0.0.json';
import semver from 'semver';
export class OASValidator extends BaseValidator {
    constructor() {
        super([schemaV2, schemaV3]);
        this.MIN_ALLOWED_VERSION = '2.0.0';
        this.VERSION_SCHEMA_MAP = {
            2: 'http://swagger.io/v2/schema.json#',
            3: 'https://spec.openapis.org/oas/3.0/schema/2021-09-28'
        };
    }
    getSchemaId(document) {
        let version = ('openapi' in document
            ? document.openapi
            : document.swagger || '').trim();
        if (!semver.valid(version) &&
            this.MIN_ALLOWED_VERSION.startsWith(version)) {
            version = this.MIN_ALLOWED_VERSION;
        }
        const major = semver.valid(version) && semver.major(version);
        return (major && this.VERSION_SCHEMA_MAP[major]) || '';
    }
}
//# sourceMappingURL=OASValidator.js.map